<!-- results.html -->
{% extends "base.html" %}

{% block title %}Результаты поиска для "{{ query }}"{% endblock %}

{% block content %}
<div class="header">
    <div class="logo">
        <!-- Логотип, если необходимо -->
    </div>
    <form method="post" class="search-form">
        <input type="text" name="query" value="{{ query }}" required autocomplete="off" placeholder="Что вы ищете?">
        <button type="submit">Найти</button>
    </form>
</div>

<div class="tabs">
    <button class="tab active" onclick="showResults('all')">Поиск</button>
    <button class="tab" onclick="showResults('images')">Картинки</button>
    <button class="tab" onclick="showResults('videos')">Видео</button>
    <button class="tab" onclick="showResults('news')">Новости</button>
</div>

<div class="results" id="results-all">
    {% if hits %}
        {% for hit in hits %}
            <div class="result">
                <div class="site-logo">
                    {% if hit.logo %}
                        <img src="{{ url_for('static', filename=hit.logo) }}" alt="Site Logo">
                    {% else %}
                        <img src="{{ url_for('static', filename='default_icon.png') }}" alt="Default Logo">
                    {% endif %}
                </div>
                <div class="result-content">
                    <h2><a href="{{ request.host_url }}{{ hit.url }}" target="_self">{{ hit.title }}</a></h2>
                    <div class="description">{{ hit.description }}</div>
                    <!-- Дополнительные поля, например, изображения или видео -->
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>Ничего не найдено для "{{ query }}"</p>
    {% endif %}
</div>

<!-- Другие категории результатов -->
<script>
    function showResults(category) {
        const categories = ['all', 'images', 'videos', 'news'];
        categories.forEach(cat => {
            const resultsDiv = document.getElementById(`results-${cat}`);
            resultsDiv.style.display = cat === category ? 'block' : 'none';
        });
        document.querySelectorAll('.tab').forEach(tab => {
            tab.classList.remove('active');
        });
        document.querySelector(`.tab[onclick="showResults('${category}')"]`).classList.add('active');
    }
</script>
{% endblock %}
